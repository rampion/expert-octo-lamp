<svg
  xmlns="http://www.w3.org/2000/svg"
  height="256"
  width="480">

  <style>
    :root {
      --light-grey: #a0a0a0;
    }

    #grid {
      display: none;
    }

    #grid > g {
      stroke-opacity: 0.1;
    }

    #types > line {
      stroke-width: 2;
      stroke-dasharray: 10 4;
      stroke: var(--light-grey);
    }

    #types > text {
      font-family: monospace;
      font-weight: bold;
      dominant-baseline: middle;
      fill: var(--light-grey);
    }

    .tree text {
      font-style: italic;
      dominant-baseline: middle;
      fill: black;
      text-anchor: middle;
    }

    .tree circle, .tree path, .tree line {
      stroke-width: 2;
      stroke: black;
      fill: white;
    }

    .tree .constructor {
      text-anchor: end;
    }
  </style>

  <!-- background grid -->
  <g id="grid">
    <g stroke="blue">
      <line x1="0"   x2="0"   y1="0" y2="256"/>
      <line x1="32"  x2="32"  y1="0" y2="256"/>
      <line x1="64"  x2="64"  y1="0" y2="256"/>
      <line x1="96"  x2="96"  y1="0" y2="256"/>
      <line x1="128" x2="128" y1="0" y2="256"/>
      <line x1="160" x2="160" y1="0" y2="256"/>
      <line x1="192" x2="192" y1="0" y2="256"/>
      <line x1="224" x2="224" y1="0" y2="256"/>
      <line x1="256" x2="256" y1="0" y2="256"/>
      <line x1="288" x2="288" y1="0" y2="256"/>
      <line x1="320" x2="320" y1="0" y2="256"/>
      <line x1="352" x2="352" y1="0" y2="256"/>
      <line x1="384" x2="384" y1="0" y2="256"/>
      <line x1="416" x2="416" y1="0" y2="256"/>
      <line x1="448" x2="448" y1="0" y2="256"/>
      <line x1="480" x2="480" y1="0" y2="256"/>
    </g>
    <g stroke="red">
      <line y1="0"   y2="0"   x1="0" x2="480"/>
      <line y1="32"  y2="32"  x1="0" x2="480"/>
      <line y1="64"  y2="64"  x1="0" x2="480"/>
      <line y1="96"  y2="96"  x1="0" x2="480"/>
      <line y1="128" y2="128" x1="0" x2="480"/>
      <line y1="160" y2="160" x1="0" x2="480"/>
      <line y1="192" y2="192" x1="0" x2="480"/>
      <line y1="224" y2="224" x1="0" x2="480"/>
      <line y1="256" y2="256" x1="0" x2="480"/>
    </g>
  </g>

  <defs>
    <!-- triangle for arrow head -->
    <marker
      id="arrow"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="4"
      markerHeight="4"
      orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" />
    </marker>
    <!-- ball for arrow tail -->
    <marker
      id="ball"
      viewBox="0 0 10 10"
      refX="5"
      refY="5"
      markerWidth="4"
      markerHeight="4"
      orient="auto-start-reverse">
      <circle cx="5" cy="5" r="5"/>
    </marker>
    <g id="canopy" class="tree">
      <path d="M -48 -16 l 48 0 a 16 16 180 1 1 0 32 l -48 0 a 16 16 180 1 1 0 -32"/>"
      <text x="-8" y="2" class="constructor">Canopy</text>

      <line x1="0" y1="0" x2="0" y2="-42" marker-start="url(#ball)" marker-end="url(#arrow)" />
    </g>
    <g id="pair" class="tree">
      <path d="M -12 -16 l 24 0 a 16 16 180 1 1 0 32 l -24 0 a 16 16 180 1 1 0 -32"/>
      <text x="0" y="2">(   ,   )</text>

      <line x1="-8" y1="0" x2="-30" y2="-42" marker-start="url(#ball)" marker-end="url(#arrow)" />
      <line x1="8" y1="0" x2="30" y2="-42" marker-start="url(#ball)" marker-end="url(#arrow)" />
    </g>

    <g id="trunk" class="tree">
      <path d="M -36 -16 l 36 0 a 16 16 180 1 1 0 32 l -36 0 a 16 16 180 1 1 0 -32"/>
      <text x="-8" y="2" class="constructor">Trunk</text>

      <line x1="0" y1="0" x2="0" y2="-42" marker-start="url(#ball)" marker-end="url(#arrow)" />
    </g>
  </defs>

  <g id="types">
    <text x="300" y="34">:: a</text>
    <line y1="64" y2="64" x1="0" x2="480"/>
    <text x="300" y="98">:: (a,a)</text>
    <line y1="128" y2="128" x1="0" x2="480"/>
    <text x="300" y="162">:: BalancedTree (a,a)</text>
    <line y1="192" y2="192" x1="0" x2="480"/>
    <text x="300" y="226">:: BalancedTree a</text> <!-- y = 32n + 2 -->
  </g>

  <g class="tree">
    <circle cx="64" cy="32" r="16"/>
    <text x="64" y="32">a₀</text>

    <circle cx="128" cy="32" r="16"/>
    <text x="128" y="32">a₁</text>

    <use x="96" y="96" href="#pair"/>

    <use x="96" y="160" href="#canopy"/>

    <use x="96" y="224" href="#trunk"/>
  </g>
</svg>
